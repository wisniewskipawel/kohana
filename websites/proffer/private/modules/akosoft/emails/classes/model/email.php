<?php defined('SYSPATH') or die('No direct script access.');/*** @author	AkoSoft Team <biuro@akosoft.pl>* @link		http://www.akosoft.pl* @copyright	Copyright (c) 2013, AkoSoft*/class Model_Email extends ORM {	protected $_table_name = 'emails';	protected $_primary_key = 'email_id';		public function find_by_alias($alias)	{		return $this->where('email_alias', '=', $alias)->find();	}	public function set_tags(array $tags = array())	{		foreach ($tags as $pattern => $replacement)		{				$this->email_subject = str_replace($pattern, $replacement, $this->email_subject);				$this->email_content = str_replace($pattern, $replacement, $this->email_content);		}		return $this;	}	public function send($to, $params = array())	{		return Email::send($to, $this->email_subject, $this->email_content, $params);	}		public static function email_by_alias($alias)	{		$self = new self();		$self->where('email_alias', '=', $alias)			->find();				if(!$self->loaded())		{			throw new Kohana_Exception('Cannot find e-mail alias :alias', array(':alias' => $alias));		}				return $self;	}}